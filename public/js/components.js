(()=>{var t={732:()=>{Vue.component("CartComponent",{data:()=>({cartUrl:"/getBasket.json",cartItems:[],showCart:!1,animateClass:null}),mounted(){this.$parent.getJson("/api/cart").then((t=>{for(let e of t.contents)this.$data.cartItems.push(e)}))},methods:{addProduct(t){let e=this.cartItems.find((e=>e.id_product===t.id_product));if(e)this.$parent.putJson(`/api/cart/${e.id_product}`,{quantity:1}).then((t=>{1===t.result&&e.quantity++}));else{const e=Object.assign({quantity:1},t);this.$parent.postJson("/api/cart",e).then((t=>{1===t.result&&this.cartItems.push(e)}))}},remove(t){let e=this.cartItems.find((e=>e.id_product===t.id_product));e&&this.$parent.delJson(`/api/cart/${e.id_product}`,t).then((t=>{1===t.result&&(e.quantity>1?e.quantity--:this.cartItems.splice(this.cartItems.indexOf(e),1))}))},openCart(){this.showCart=!this.showCart,this.animateClass="scale-in-hor-right"},closeCart(){this.animateClass="slide-out-bottom",setTimeout((()=>{this.showCart=!this.showCart}),1e3)},qtyInCart(){return this.cartItems.reduce(((t,e)=>t+e.quantity),0)},totalCost(){return this.cartItems.reduce(((t,e)=>t+e.quantity*e.price),0)}},template:'<div>\n      <a href="#" class="btn-cart" @click="openCart()">\n        <i class="fa-regular fa-cart-shopping">\n        </i>\n        <span class="cart-value">{{ qtyInCart() }}</span>\n      </a>\n  \n      <nav class="cart-items-wrapper" :class="animateClass" v-show="showCart">\n        <i class="fa-light fa-xmark cart-items-close" @click="closeCart"></i>\n        <h3>КОРЗИНА</h3>\n        <div class="cart-items-content">\n          <div class="cart-items">\n            <cart-item \n              v-for="item of cartItems" \n              :key="item.id_product" \n              :cart-item="item" \n              @remove="remove(item)">\n            </cart-item>\n          </div>\n          <div class="cart-summary">\n            <span>Товаров на сумму:</span>\n            <span>{{ totalCost() }}</span>\n          </div>\n        </div>\n      </nav>\n    </div>\n    '}),Vue.component("cart-item",{props:["cartItem"],template:'\n      <div class="cart-item">\n        <div class="cart-item-left">\n          <div class="product-desc">\n            <h4 class="product-title">{{ cartItem.product_name }}</h4>\n            <div class="product-quantity">Quantity: {{ cartItem.quantity }}</div>\n            <div class="product-single-price">$ {{ cartItem.price }} each</div>\n          </div>\n        </div>\n        <div class="cart-item-right">\n          <div class="product-price">$ {{cartItem.quantity*cartItem.price}}</div>\n            <button class="del-btn" @click="$emit(\'remove\', cartItem)">&times;</button>\n          </div>    \n      </div>\n      '})},758:()=>{Vue.component("ErrorComponent",{data:()=>({text:""}),computed:{isVisible(){return""!==this.text}},template:'<div class="error-wrapper" v-if="isVisible">\n  <div class="error-close-btn" @click="text=\'\'">+</div>\n  <div class="error-content">\n      Ошибка выполнения запроса\n  </div>\n</div>'})},183:()=>{Vue.component("FilterComponent",{data:()=>({userSearch:""}),template:'<form action="#" class="search-form" @submit.prevent="$root.filter">\n          <input type="text" class="filtered" v-model="$root.userSearch">\n          <button type="submit" class="btn-search">\n              <i class="fas fa-search"></i>\n          </button>\n      </form>'})},523:()=>{Vue.component("ProductsComponent",{data:()=>({filtered:[],products:[]}),mounted(){this.$parent.getJson("/api/products").then((t=>{for(let e of t)this.$data.products.push(e),this.$data.filtered.push(e)}))},methods:{filter(t){let e=new RegExp(t,"i");this.filtered=this.products.filter((t=>e.test(t.product_name)))}},template:'<section class="products">\n                  <single-product-component v-for="item of filtered" \n                  :key="item.id_product" \n                  :img="item.img"\n                  :product="item"\n                  @add-product="$parent.$refs.cart.addProduct"></single-product-component>\n                 </section>'}),Vue.component("SingleProductComponent",{props:["product","img"],template:'<div class="product-item">\n                <h3>{{product.product_name}}</h3>\n                <img :src="product.img" />\n                <span>{{product.price}}</span>\n                <button class="product-item-btn" @click="$emit(\'add-product\', product)">В корзину</button>\n              </div>'})}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(732),e=r.n(t),n=r(758),s=r.n(n),a=r(183),i=r.n(a),c=r(523),o=r.n(c);e(),s(),i(),o()})()})();